<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ€ç“¶å·¥ç¨‹å¸ˆ - Ecosystem Bottle Engineer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .setup-phase, .game-phase, .help-panel, .ingame-help {
            display: none;
        }

        .setup-phase.active, .game-phase.active, .help-panel.active, .ingame-help.active {
            display: block;
        }

        .bottle-selection {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .bottle-option {
            text-align: center;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
            min-width: 200px;
        }

        .bottle-option:hover, .bottle-option.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-5px);
        }

        .bottle-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .control-panel {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .ecosystem-view {
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 30%, #8FBC8F 70%, #654321 100%);
            border: 3px solid #4682B4;
            border-radius: 15px;
            height: 400px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }

        .water-level {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(135, 206, 235, 0.8);
            transition: height 1s;
        }

        /* ç”Ÿç‰©åŸºç¡€æ ·å¼ */
        .organism {
            position: absolute;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 10;
        }

        /* ç»¿è—» - å›ºå®šä½ç½®è½»å¾®æ‘†åŠ¨ */
        .organism.greenAlgae {
            animation: algaeSway 4s ease-in-out infinite;
        }

        @keyframes algaeSway {
            0%, 100% { transform: rotate(-3deg) scale(1); }
            50% { transform: rotate(3deg) scale(1.02); }
        }

        /* è“ç»¿è—» - å¾®å°æ¼‚æµ® */
        .organism.blueAlgae {
            animation: microFloat 6s ease-in-out infinite;
        }

        @keyframes microFloat {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-3px) translateX(2px); }
            66% { transform: translateY(2px) translateX(-2px); }
        }

        /* æµ®è - æ°´é¢è½»å¾®æ¼‚ç§» */
        .organism.duckweed {
            animation: surfaceDrift 8s linear infinite;
        }

        @keyframes surfaceDrift {
            0% { transform: translateX(0px); }
            50% { transform: translateX(15px); }
            100% { transform: translateX(0px); }
        }

        /* æ°´è‰ - æ°´æµæ‘†åŠ¨ */
        .organism.waterweed {
            animation: underwaterSway 5s ease-in-out infinite;
            transform-origin: bottom center;
        }

        @keyframes underwaterSway {
            0%, 100% { transform: rotate(-8deg); }
            50% { transform: rotate(8deg); }
        }

        /* æ¨±èŠ±è™¾ - å°è·³è·ƒæ¸¸åŠ¨ */
        .organism.cherryShrimp {
            animation: shrimpHop 3s ease-in-out infinite;
        }

        @keyframes shrimpHop {
            0%, 90%, 100% { transform: translateY(0px) scaleX(1); }
            10% { transform: translateY(-8px) scaleX(1.1); }
            20% { transform: translateY(-5px) scaleX(1); }
            30% { transform: translateY(-3px) scaleX(0.95); }
        }

        /* è‹¹æœèº - ç¼“æ…¢è •åŠ¨ */
        .organism.appleSnail {
            animation: snailCrawl 10s linear infinite;
        }

        @keyframes snailCrawl {
            0%, 100% { transform: scaleX(1) scaleY(1); }
            25% { transform: scaleX(1.1) scaleY(0.95); }
            50% { transform: scaleX(1) scaleY(1.05); }
            75% { transform: scaleX(0.95) scaleY(1); }
        }

        /* æ–‘é©¬é±¼ - è‡ªç„¶æ¸¸æ³³ */
        .organism.zebrafish {
            animation: fishSwim 4s ease-in-out infinite;
        }

        @keyframes fishSwim {
            0%, 100% { transform: translateX(0px) scaleY(1); }
            25% { transform: translateX(10px) scaleY(1.05); }
            50% { transform: translateX(8px) scaleY(1); }
            75% { transform: translateX(-5px) scaleY(0.98); }
        }

        /* å°é¾™è™¾ - è­¦è§‰æ€§æ¸¸åŠ¨ */
        .organism.crayfish {
            animation: crayfishMove 6s ease-in-out infinite;
        }

        @keyframes crayfishMove {
            0%, 80%, 100% { transform: translateX(0px) rotate(0deg); }
            10% { transform: translateX(12px) rotate(5deg); }
            20% { transform: translateX(15px) rotate(0deg); }
            30% { transform: translateX(8px) rotate(-3deg); }
            40% { transform: translateX(0px) rotate(0deg); }
        }

        /* ç¡åŒ–ç»†èŒ - å¾®æŒ¯åŠ¨ */
        .organism.nitrobacteria {
            animation: bacteriaVibrate 1.5s ease-in-out infinite;
        }

        @keyframes bacteriaVibrate {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.05) translate(0.5px, -0.5px); }
            50% { transform: scale(0.98) translate(-0.5px, 0.5px); }
            75% { transform: scale(1.02) translate(0.5px, 0px); }
        }

        /* æ°”æ³¡æ•ˆæœ */
        .bubble {
            position: absolute;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 100%);
            border-radius: 50%;
            pointer-events: none;
            animation: bubbleRise 6s linear infinite;
        }

        @keyframes bubbleRise {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0);
            }
            10% {
                opacity: 0.8;
                transform: translateY(-20px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-400px) scale(1.5);
            }
        }

        /* æ°´æ³¢çº¹æ•ˆæœ */
        .water-ripple {
            position: absolute;
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            pointer-events: none;
            animation: ripple 4s ease-out infinite;
        }

        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 0.8;
            }
            100% {
                transform: scale(6);
                opacity: 0;
            }
        }

        /* è§…é£ŸåŠ¨ç”» */
        .organism.feeding {
            animation-duration: 2s;
            animation-timing-function: ease-in-out;
            animation-iteration-count: 3;
        }

        .organism.feeding.cherryShrimp {
            animation-name: shrimpFeeding;
        }

        @keyframes shrimpFeeding {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .organism.feeding.zebrafish {
            animation-name: fishFeeding;
        }

        @keyframes fishFeeding {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.2); }
        }

        /* ç”Ÿé•¿åŠ¨ç”» */
        .organism.growing {
            animation: growth 2s ease-out;
        }

        @keyframes growth {
            0% { 
                transform: scale(0.3); 
                opacity: 0.3; 
            }
            50% { 
                transform: scale(1.1); 
                opacity: 0.8; 
            }
            100% { 
                transform: scale(1); 
                opacity: 1; 
            }
        }

        /* æ­»äº¡åŠ¨ç”» */
        .organism.dying {
            animation: death 4s ease-out forwards;
        }

        @keyframes death {
            0% { 
                opacity: 1; 
                transform: scale(1); 
                filter: brightness(1);
            }
            50% { 
                opacity: 0.5; 
                transform: scale(0.8); 
                filter: brightness(0.6);
            }
            100% { 
                opacity: 0; 
                transform: scale(0.3); 
                filter: brightness(0.2);
            }
        }

        /* ç¯å¢ƒæ´»è·ƒåº¦è°ƒèŠ‚ */
        .ecosystem-view.high-activity .organism {
            animation-duration: 0.7s;
        }

        .ecosystem-view.low-activity .organism {
            animation-duration: 8s;
        }

        .stats-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .stat-bar {
            margin: 10px 0;
        }

        .stat-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 1s;
            border-radius: 10px;
        }

        .oxygen { background: linear-gradient(90deg, #ff6b6b, #4ecdc4); }
        .ph { background: linear-gradient(90deg, #45b7d1, #96ceb4); }
        .nutrients { background: linear-gradient(90deg, #feca57, #ff9ff3); }
        .temperature { background: linear-gradient(90deg, #ff9a9e, #fecfef); }

        .control-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            max-height: 400px;
            overflow-y: auto;
        }

        .control-section h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .slider {
            width: 100%;
            margin: 10px 0;
        }

        .organism-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 8px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .organism-card {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .organism-card:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .organism-card.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .organism-card .icon {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .organism-card .name {
            font-size: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
            width: 100%;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
            width: auto;
            display: inline-block;
        }

        .event-popup, .ingame-help-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            text-align: center;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .help-content {
            max-height: 400px;
            overflow-y: auto;
            text-align: left;
        }

        .achievement {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            display: inline-block;
            font-size: 14px;
        }

        .game-time {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
        }

        .population-count {
            position: absolute;
            top: 5px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .tips-panel {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .tips-panel h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
        }

        .danger {
            background: #f8d7da;
            border: 1px solid #dc3545;
            color: #721c24;
        }

        .success {
            background: #d4edda;
            border: 1px solid #28a745;
            color: #155724;
        }

        .ecosystem-status {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-size: 12px;
        }

        .balance-indicator {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }

        .balance-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .balanced { background: #28a745; }
        .warning { background: #ffc107; }
        .critical { background: #dc3545; }

        @media (max-width: 1200px) {
            .control-panel {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        @media (max-width: 768px) {
            .bottle-selection {
                flex-direction: column;
                align-items: center;
            }
        }

        /* ç²’å­æ•ˆæœ */
        .particle {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            animation: particleFloat 10s linear infinite;
        }

        @keyframes particleFloat {
            0% { 
                transform: translateY(0) translateX(0);
                opacity: 0.4;
            }
            50% {
                opacity: 0.8;
                transform: translateY(-100px) translateX(20px);
            }
            100% { 
                transform: translateY(-200px) translateX(-10px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª ç”Ÿæ€ç“¶å·¥ç¨‹å¸ˆ</h1>
            <p>åˆ›é€ å¹¶ç»´æŠ¤æ‚¨çš„å¾®ç”Ÿæ€ç³»ç»Ÿ</p>
            <button class="btn btn-secondary btn-small" onclick="showHelp()">ğŸ“– æ¸¸æˆè¯´æ˜</button>
        </div>

        <div class="game-area">
            <!-- æ¸¸æˆè®¾ç½®é˜¶æ®µ -->
            <div class="setup-phase active">
                <h2>ğŸš€ å¼€å§‹æ‚¨çš„ç”Ÿæ€ä¹‹æ—…</h2>
                <p>é€‰æ‹©ç”Ÿæ€ç“¶å¤§å°ï¼Œä¸åŒå¤§å°ä¼šå½±å“æ¸¸æˆéš¾åº¦å’Œç”Ÿæ€å¤æ‚æ€§ï¼š</p>
                
                <div class="bottle-selection">
                    <div class="bottle-option" data-size="small">
                        <div class="bottle-icon">ğŸ¶</div>
                        <h3>å°å‹ç“¶ (250ml)</h3>
                        <p>é€‚åˆæ–°æ‰‹</p>
                        <small>å˜åŒ–è¾ƒæ…¢ï¼Œå®¹æ˜“æ§åˆ¶</small>
                    </div>
                    <div class="bottle-option" data-size="medium">
                        <div class="bottle-icon">ğŸº</div>
                        <h3>ä¸­å‹ç“¶ (500ml)</h3>
                        <p>æ ‡å‡†éš¾åº¦</p>
                        <small>å¹³è¡¡çš„æŒ‘æˆ˜æ€§</small>
                    </div>
                    <div class="bottle-option" data-size="large">
                        <div class="bottle-icon">ğŸ«™</div>
                        <h3>å¤§å‹ç“¶ (1000ml)</h3>
                        <p>ä¸“å®¶æ¨¡å¼</p>
                        <small>å¤æ‚çš„ç”Ÿæ€å…³ç³»</small>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="startGame()" id="startBtn" disabled>å¼€å§‹æ¸¸æˆ</button>
                </div>
            </div>

            <!-- æ¸¸æˆä¸»ç•Œé¢ -->
            <div class="game-phase">
                <div class="control-panel">
                    <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
                    <div>
                        <div class="control-section">
                            <h3>ğŸ® ç¯å¢ƒæ§åˆ¶</h3>
                            <div>
                                <label>å…‰ç…§å¼ºåº¦: <span id="lightValue">50</span>%</label>
                                <input type="range" class="slider" id="lightSlider" min="0" max="100" value="50">
                                <small style="color: #666;">ğŸ’¡ å½±å“æ¤ç‰©å…‰åˆä½œç”¨æ•ˆç‡</small>
                            </div>
                            <div>
                                <label>æ¸©åº¦: <span id="tempValue">23</span>Â°C</label>
                                <input type="range" class="slider" id="tempSlider" min="15" max="30" value="23">
                                <small style="color: #666;">ğŸŒ¡ï¸ å½±å“ç”Ÿç‰©æ´»åŠ¨é€Ÿåº¦</small>
                            </div>
                            <div>
                                <label>é€šé£: <span id="ventValue">å¯†å°</span></label>
                                <select id="ventSelect" style="width: 100%; padding: 5px;">
                                    <option value="sealed">å¯†å°</option>
                                    <option value="semi">åŠå¼€æ”¾</option>
                                    <option value="open">å¼€æ”¾</option>
                                </select>
                                <small style="color: #666;">ğŸ’¨ å½±å“æ°”ä½“äº¤æ¢é€Ÿåº¦</small>
                            </div>
                            <button class="btn btn-danger" onclick="emergencyOpen()">ğŸš¨ ç´§æ€¥å¼€ç“¶</button>
                            <button class="btn btn-secondary" onclick="showIngameHelp()">ğŸ’¡ æ¸¸æˆæç¤º</button>
                        </div>

                        <div class="control-section">
                            <h3>â• æ·»åŠ ç”Ÿç‰©</h3>
                            <p style="font-size: 14px; color: #666; margin-bottom: 10px;">
                                ç‚¹å‡»é€‰æ‹©ç”Ÿç‰©ï¼Œç„¶åç‚¹å‡»æ·»åŠ æŒ‰é’®
                            </p>
                            <div class="organism-grid" id="organismSelector">
                                <!-- ç”Ÿç‰©é€‰æ‹©å™¨å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                            </div>
                            <button class="btn" onclick="addSelectedOrganism()" id="addOrganismBtn" disabled>æ·»åŠ é€‰ä¸­çš„ç”Ÿç‰©</button>
                        </div>
                    </div>

                    <!-- ä¸­å¤®ç”Ÿæ€ç“¶è§†å›¾ -->
                    <div>
                        <div class="game-time" id="gameTime">ç¬¬ 1 å¤©</div>
                        <div class="ecosystem-view" id="ecosystemView">
                            <div class="population-count" id="populationCount">æ€»æ•°: 0</div>
                            <div class="ecosystem-status" id="ecosystemStatus">
                                <!-- ç”Ÿæ€çŠ¶æ€æŒ‡ç¤ºå™¨ -->
                            </div>
                            <!-- ç”Ÿç‰©å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-small" onclick="pauseGame()" id="pauseBtn">â¸ï¸ æš‚åœ</button>
                            <button class="btn btn-small" onclick="speedUp()" id="speedBtn">â© 2xé€Ÿåº¦</button>
                            <button class="btn btn-danger btn-small" onclick="resetGame()">ğŸ”„ é‡æ–°å¼€å§‹</button>
                        </div>

                        <!-- å®æ—¶æç¤ºé¢æ¿ -->
                        <div id="tipsPanel"></div>
                    </div>

                    <!-- å³ä¾§çŠ¶æ€é¢æ¿ -->
                    <div>
                        <div class="stats-panel">
                            <h3>ğŸ“Š ç”Ÿæ€æŒ‡æ ‡</h3>
                            <div class="stat-bar">
                                <div class="stat-label">
                                    <span>æº¶æ°§é‡ ğŸ«§</span>
                                    <span id="oxygenValue">50%</span>
                                </div>
                                <div class="bar">
                                    <div class="bar-fill oxygen" id="oxygenBar" style="width: 50%"></div>
                                </div>
                                <small style="color: #666;">40-80%æœ€ä½³ï¼Œè¿‡é«˜è¿‡ä½éƒ½å±é™©</small>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">
                                    <span>pHå€¼ âš—ï¸</span>
                                    <span id="phValue">7.0</span>
                                </div>
                                <div class="bar">
                                    <div class="bar-fill ph" id="phBar" style="width: 50%"></div>
                                </div>
                                <small style="color: #666;">6.5-8.5æœ€ä½³ï¼Œå½±å“æ‰€æœ‰ç”Ÿç‰©</small>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">
                                    <span>è¥å…»ç› ğŸ§‚</span>
                                    <span id="nutrientsValue">50%</span>
                                </div>
                                <div class="bar">
                                    <div class="bar-fill nutrients" id="nutrientsBar" style="width: 50%"></div>
                                </div>
                                <small style="color: #666;">æ¤ç‰©éœ€è¦ï¼Œè¿‡å¤šä¼šå¯Œè¥å…»åŒ–</small>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-label">
                                    <span>æœ‰æ¯’ç‰©è´¨ â˜ ï¸</span>
                                    <span id="toxinsValue">0%</span>
                                </div>
                                <div class="bar">
                                    <div class="bar-fill temperature" id="toxinsBar" style="width: 0%"></div>
                                </div>
                                <small style="color: #666;">è¶Šä½è¶Šå¥½ï¼Œé«˜äº50%å¾ˆå±é™©</small>
                            </div>
                        </div>

                        <div class="stats-panel">
                            <h3>ğŸŒ± ç§ç¾¤ç»Ÿè®¡</h3>
                            <div id="populationStats">
                                <p style="color: #666; font-size: 14px;">è¿˜æ²¡æœ‰ç”Ÿç‰©ï¼Œå¿«å»æ·»åŠ ä¸€äº›å§ï¼</p>
                            </div>
                        </div>

                        <div class="stats-panel">
                            <h3>ğŸ† æˆå°±</h3>
                            <div id="achievements">
                                <p style="color: #666; font-size: 14px;">æš‚æ— æˆå°±ï¼Œç»§ç»­åŠªåŠ›ï¼</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¸®åŠ©é¢æ¿ -->
    <div class="help-panel">
        <div class="overlay" onclick="hideHelp()"></div>
        <div class="event-popup">
            <h2>ğŸ“š æ¸¸æˆè¯´æ˜</h2>
            <div class="help-content">
                <h3>ğŸ¯ æ¸¸æˆç›®æ ‡</h3>
                <p>åˆ›é€ å¹¶ç»´æŠ¤ä¸€ä¸ªç¨³å®šçš„å¾®ç”Ÿæ€ç³»ç»Ÿï¼Œè®©ä¸åŒçš„ç”Ÿç‰©å’Œè°å…±å­˜ã€‚</p>
                
                <h3>ğŸ® åŸºæœ¬æ“ä½œ</h3>
                <ul>
                    <li><strong>ç¯å¢ƒæ§åˆ¶</strong>ï¼šè°ƒèŠ‚å…‰ç…§ã€æ¸©åº¦å’Œé€šé£æ¥å½±å“ç”Ÿæ€å¹³è¡¡</li>
                    <li><strong>æ·»åŠ ç”Ÿç‰©</strong>ï¼šé€‰æ‹©åˆé€‚çš„ç”Ÿç‰©ç»„åˆå»ºç«‹é£Ÿç‰©é“¾</li>
                    <li><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼šå…³æ³¨æº¶æ°§é‡ã€pHå€¼ã€è¥å…»ç›å’Œæœ‰æ¯’ç‰©è´¨</li>
                </ul>

                <h3>ğŸŒ¿ ç”Ÿç‰©è¡Œä¸ºç‰¹å¾</h3>
                <ul>
                    <li><strong>ğŸŒ± ç»¿è—»</strong>ï¼šå›ºå®šæ‘†åŠ¨ï¼Œè¿›è¡Œå…‰åˆä½œç”¨</li>
                    <li><strong>ğŸŒ¿ è“ç»¿è—»</strong>ï¼šå¾®å°æ¼‚æµ®ï¼Œå¯å›ºæ°®</li>
                    <li><strong>ğŸƒ æµ®è</strong>ï¼šæ°´é¢æ¼‚ç§»ï¼Œæä¾›é®é˜´</li>
                    <li><strong>ğŸŒ¾ æ°´è‰</strong>ï¼šæ°´ä¸‹æ‘†åŠ¨ï¼Œå‡€åŒ–æ°´è´¨</li>
                    <li><strong>ğŸ¦ æ¨±èŠ±è™¾</strong>ï¼šå°è·³è·ƒæ¸¸åŠ¨ï¼Œæ¸…é£Ÿè—»ç±»</li>
                    <li><strong>ğŸŒ è‹¹æœèº</strong>ï¼šç¼“æ…¢è •åŠ¨ï¼Œåº•æ –æ¸…æ´</li>
                    <li><strong>ğŸŸ æ–‘é©¬é±¼</strong>ï¼šè‡ªç„¶æ¸¸æ³³ï¼Œæ´»è·ƒè§…é£Ÿ</li>
                    <li><strong>ğŸ¦ å°é¾™è™¾</strong>ï¼šè­¦è§‰æ¸¸åŠ¨ï¼Œé¡¶çº§æ é£Ÿ</li>
                    <li><strong>ğŸ¦  ç¡åŒ–ç»†èŒ</strong>ï¼šå¾®æŒ¯åŠ¨ï¼Œåˆ†è§£åºŸç‰©</li>
                </ul>

                <h3>âš–ï¸ ç”Ÿæ€å¹³è¡¡è¦ç‚¹</h3>
                <ul>
                    <li><strong>é£Ÿç‰©é“¾</strong>ï¼šç¡®ä¿æ¯ä¸ªè¥å…»çº§éƒ½æœ‰åˆé€‚çš„æ•°é‡</li>
                    <li><strong>æº¶æ°§</strong>ï¼šå…‰åˆä½œç”¨äº§ç”Ÿï¼Œå‘¼å¸æ¶ˆè€—ï¼Œéœ€è¦é€‚ä¸­</li>
                    <li><strong>è¥å…»å¾ªç¯</strong>ï¼šæ¤ç‰©æ¶ˆè€—è¥å…»ç›ï¼Œåˆ†è§£è€…é‡Šæ”¾è¥å…»ç›</li>
                    <li><strong>åºŸç‰©å¤„ç†</strong>ï¼šåŠæ—¶å¤„ç†æœ‰æ¯’ç‰©è´¨ï¼Œé¿å…ç”Ÿæ€å´©æºƒ</li>
                </ul>

                <h3>ğŸš¨ å¸¸è§é—®é¢˜</h3>
                <ul>
                    <li><strong>è—»ç±»çˆ†å‘</strong>ï¼šå‡å°‘å…‰ç…§æˆ–å¢åŠ è‰é£ŸåŠ¨ç‰©</li>
                    <li><strong>æº¶æ°§ä¸è¶³</strong>ï¼šå¢åŠ æ¤ç‰©æˆ–æ”¹å–„é€šé£</li>
                    <li><strong>ç§ç¾¤å¤±è¡¡</strong>ï¼šè°ƒæ•´æ•é£Ÿè€…å’Œè¢«æ•é£Ÿè€…çš„æ¯”ä¾‹</li>
                    <li><strong>æ°´è´¨æ¶åŒ–</strong>ï¼šä½¿ç”¨ç´§æ€¥å¼€ç“¶åŠŸèƒ½</li>
                </ul>

                <h3>ğŸŠ æˆå°±ç³»ç»Ÿ</h3>
                <p>å®Œæˆç‰¹å®šç›®æ ‡å¯è·å¾—æˆå°±ï¼šç»´æŒå¹³è¡¡ã€ç”Ÿç‰©å¤šæ ·æ€§ã€æé™ç”Ÿå­˜ç­‰ã€‚</p>
            </div>
            <button class="btn" onclick="hideHelp()">å…³é—­</button>
        </div>
    </div>

    <!-- æ¸¸æˆå†…å¸®åŠ©é¢æ¿ -->
    <div class="ingame-help">
        <div class="overlay" onclick="hideIngameHelp()"></div>
        <div class="ingame-help-popup">
            <h2>ğŸ’¡ ç”Ÿç‰©è¡Œä¸ºè§‚å¯ŸæŒ‡å—</h2>
            <div class="help-content">
                <h3>ğŸ”„ è¥å…»å¾ªç¯æœºåˆ¶</h3>
                <p><strong>é˜³å…‰èƒ½é‡æµ</strong>ï¼šå…‰ç…§ â†’ æ¤ç‰©å…‰åˆä½œç”¨ â†’ äº§ç”Ÿæ°§æ°”å’Œæœ‰æœºç‰©</p>
                <p><strong>é£Ÿç‰©é“¾ä¼ é€’</strong>ï¼šæ¤ç‰© â†’ è‰é£ŸåŠ¨ç‰© â†’ è‚‰é£ŸåŠ¨ç‰©</p>
                <p><strong>ç‰©è´¨å¾ªç¯</strong>ï¼šæ­»äº¡æœ‰æœºç‰© â†’ åˆ†è§£è€…åˆ†è§£ â†’ é‡Šæ”¾è¥å…»ç› â†’ æ¤ç‰©å¸æ”¶</p>

                <h3>ğŸ¬ ç”Ÿç‰©è¡Œä¸ºè§£è¯»</h3>
                <ul>
                    <li><strong>ğŸŒ± ç»¿è—»æ‘†åŠ¨</strong>ï¼šå›ºå®šåœ¨åŸºåº•ï¼Œè½»æŸ”æ‘†åŠ¨è¡¨ç¤ºå…‰åˆä½œç”¨æ´»è·ƒ</li>
                    <li><strong>ğŸƒ æµ®èæ¼‚ç§»</strong>ï¼šåœ¨æ°´é¢ç¼“æ…¢æ¼‚ç§»ï¼Œæä¾›é®é˜´é™æ¸©</li>
                    <li><strong>ğŸŒ¾ æ°´è‰æ‘†åŠ¨</strong>ï¼šæ ¹éƒ¨å›ºå®šï¼Œéšæ°´æµæ‘†åŠ¨ï¼Œå‡€åŒ–æ°´è´¨</li>
                    <li><strong>ğŸ¦ è™¾è·³è·ƒ</strong>ï¼šå°å¹…è·³è·ƒå¼æ¸¸åŠ¨ï¼Œè¡¨ç¤ºåœ¨è§…é£Ÿè—»ç±»</li>
                    <li><strong>ğŸŒ èºè •åŠ¨</strong>ï¼šç¼“æ…¢å˜å½¢ç§»åŠ¨ï¼Œæ¸…ç†è¡¨é¢é™„ç€ç‰©</li>
                    <li><strong>ğŸŸ é±¼æ¸¸æ³³</strong>ï¼šæµç•…æ¸¸åŠ¨ï¼Œæ´»è·ƒåº¦åæ˜ æ°´è´¨çŠ¶å†µ</li>
                    <li><strong>ğŸ¦ è™¾è­¦è§‰</strong>ï¼šé—´æ­‡æ€§å¿«é€Ÿç§»åŠ¨ï¼Œé¡¶çº§æ é£Ÿè€…è¡Œä¸º</li>
                    <li><strong>ğŸ¦  èŒæŒ¯åŠ¨</strong>ï¼šå¾®å°æŒ¯åŠ¨ï¼Œåˆ†è§£æœ‰æœºç‰©å‡€åŒ–æ°´è´¨</li>
                </ul>

                <h3>ğŸŒ¡ï¸ ç¯å¢ƒå› å­å½±å“</h3>
                <ul>
                    <li><strong>å…‰ç…§</strong>ï¼šå¼ºå…‰ä¿ƒè¿›æ¤ç‰©æ‘†åŠ¨ï¼Œå¼±å…‰å‡ç¼“ç”Ÿé•¿</li>
                    <li><strong>æ¸©åº¦</strong>ï¼šé€‚æ¸©ç”Ÿç‰©æ´»è·ƒï¼Œæç«¯æ¸©åº¦è¡Œä¸ºè¿Ÿç¼“</li>
                    <li><strong>é€šé£</strong>ï¼šå½±å“æ°”ä½“äº¤æ¢ï¼Œå¼€æ”¾æ—¶æ°”æ³¡æ›´å¤š</li>
                    <li><strong>æ°´è´¨</strong>ï¼šæº¶æ°§å……è¶³æ—¶åŠ¨ç‰©æ¸¸åŠ¨æ´»è·ƒï¼Œç¼ºæ°§æ—¶è¡ŒåŠ¨ç¼“æ…¢</li>
                </ul>

                <h3>âš ï¸ å¼‚å¸¸è¡Œä¸ºé¢„è­¦</h3>
                <ul>
                    <li><strong>æ¤ç‰©æ‘†åŠ¨å‡ç¼“</strong>ï¼šå¯èƒ½ç¼ºå…‰æˆ–è¥å…»ä¸è¶³</li>
                    <li><strong>åŠ¨ç‰©æ¸¸åŠ¨ç¼“æ…¢</strong>ï¼šå¯èƒ½ç¼ºæ°§æˆ–æ°´è´¨æ¶åŒ–</li>
                    <li><strong>ç”Ÿç‰©èšé›†ä¸€å¤„</strong>ï¼šå¯èƒ½è¯¥åŒºåŸŸç¯å¢ƒæ›´é€‚å®œ</li>
                    <li><strong>æ´»åŠ¨å®Œå…¨åœæ­¢</strong>ï¼šç”Ÿç‰©å¥åº·ä¸¥é‡å—æŸ</li>
                </ul>

                <h3>ğŸ¯ è§‚å¯Ÿè¦ç‚¹</h3>
                <ul>
                    <li><strong>èŠ‚å¥å˜åŒ–</strong>ï¼šç”Ÿç‰©æ´»åŠ¨èŠ‚å¥åæ˜ ç¯å¢ƒçŠ¶æ€</li>
                    <li><strong>ç©ºé—´åˆ†å¸ƒ</strong>ï¼šä¸åŒç”Ÿç‰©å æ®é€‚åˆçš„ç”Ÿæ€ä½</li>
                    <li><strong>ç›¸äº’ä½œç”¨</strong>ï¼šè§‚å¯Ÿæ•é£Ÿä¸è¢«æ•é£Ÿå…³ç³»</li>
                    <li><strong>ç¯å¢ƒå“åº”</strong>ï¼šè°ƒæ•´å‚æ•°æ—¶è§‚å¯Ÿç”Ÿç‰©ååº”</li>
                </ul>

                <h3>ğŸ“ˆ æˆåŠŸæŒ‡æ ‡</h3>
                <p>ç†æƒ³çŠ¶æ€ï¼šå„ç§ç”Ÿç‰©è¡Œä¸ºè‡ªç„¶æµç•…ï¼Œæ´»åŠ¨èŠ‚å¥ç¨³å®šï¼Œç”Ÿæ€ç³»ç»Ÿå’Œè°è¿è½¬ã€‚</p>
            </div>
            <button class="btn" onclick="hideIngameHelp()">å…³é—­</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            bottleSize: null,
            day: 1,
            speed: 1,
            paused: false,
            organisms: [],
            environment: {
                light: 50,
                temperature: 23,
                ventilation: 'sealed',
                oxygen: 50,
                ph: 7.0,
                nutrients: 50,
                toxins: 0
            },
            achievements: [],
            selectedOrganism: null,
            movementIntervals: []
        };

        // ç”Ÿç‰©å®šä¹‰
        const organismTypes = {
            greenAlgae: { 
                name: 'ç»¿è—»', 
                icon: 'ğŸŒ±', 
                type: 'producer', 
                growth: 2, 
                oxygen: 3, 
                ph: 0.1, 
                description: 'å›ºå®šæ‘†åŠ¨è¿›è¡Œå…‰åˆä½œç”¨ï¼Œé«˜äº§æ°§ä½†æ˜“è¿‡åº¦ç¹æ®–',
                layer: 'bottom',  // åº•å±‚å›ºå®š
                mobility: 'fixed' // å›ºå®šä½ç½®
            },
            blueAlgae: { 
                name: 'è“ç»¿è—»', 
                icon: 'ğŸŒ¿', 
                type: 'producer', 
                growth: 1.5, 
                oxygen: 2, 
                ph: -0.1, 
                description: 'å¾®å°æ¼‚æµ®ï¼Œå¯å›ºæ°®ï¼Œå¯èƒ½äº§ç”Ÿæ¯’ç´ ',
                layer: 'middle',
                mobility: 'drift'  // ç¼“æ…¢æ¼‚ç§»
            },
            duckweed: { 
                name: 'æµ®è', 
                icon: 'ğŸƒ', 
                type: 'producer', 
                growth: 1, 
                oxygen: 2.5, 
                ph: 0, 
                description: 'æ°´é¢æ¼‚ç§»ï¼Œæä¾›é®é˜´æ•ˆæœ',
                layer: 'surface', // æ°´é¢å±‚
                mobility: 'float'  // æ°´é¢æ¼‚æµ®
            },
            waterweed: { 
                name: 'æ°´è‰', 
                icon: 'ğŸŒ¾', 
                type: 'producer', 
                growth: 0.5, 
                oxygen: 1.5, 
                ph: 0.05, 
                description: 'æ°´ä¸‹æ‘†åŠ¨ï¼Œæä¾›èº²é¿ç©ºé—´ï¼Œå‡€åŒ–æ°´è´¨',
                layer: 'bottom',
                mobility: 'sway'   // æ‘†åŠ¨
            },
            cherryShrimp: { 
                name: 'æ¨±èŠ±è™¾', 
                icon: 'ğŸ¦', 
                type: 'primary', 
                growth: 1.2, 
                oxygen: -1, 
                nutrients: -1, 
                description: 'è·³è·ƒå¼æ¸¸åŠ¨ï¼Œæ´»æ³¼è§…é£Ÿè—»ç±»',
                layer: 'middle',
                mobility: 'hop'    // è·³è·ƒæ¸¸åŠ¨
            },
            appleSnail: { 
                name: 'è‹¹æœèº', 
                icon: 'ğŸŒ', 
                type: 'primary', 
                growth: 0.8, 
                oxygen: -0.5, 
                nutrients: -0.5, 
                description: 'ç¼“æ…¢è •åŠ¨ï¼Œåº•æ –æ¸…æ´èƒ½åŠ›å¼º',
                layer: 'bottom',
                mobility: 'crawl'  // çˆ¬è¡Œ
            },
            zebrafish: { 
                name: 'æ–‘é©¬é±¼', 
                icon: 'ğŸŸ', 
                type: 'secondary', 
                growth: 0.3, 
                oxygen: -2, 
                nutrients: 0, 
                description: 'è‡ªç„¶æ¸¸æ³³ï¼Œéœ€è¦è¾ƒé«˜æº¶æ°§',
                layer: 'middle',
                mobility: 'swim'   // æ¸¸æ³³
            },
            crayfish: { 
                name: 'å°é¾™è™¾', 
                icon: 'ğŸ¦', 
                type: 'secondary', 
                growth: 0.2, 
                oxygen: -1.5, 
                nutrients: 0, 
                description: 'è­¦è§‰æ¸¸åŠ¨ï¼Œé¡¶çº§æ é£Ÿè€…',
                layer: 'bottom',
                mobility: 'hunt'   // ç‹©çŒæ¸¸åŠ¨
            },
            nitrobacteria: { 
                name: 'ç¡åŒ–ç»†èŒ', 
                icon: 'ğŸ¦ ', 
                type: 'decomposer', 
                growth: 0.1, 
                toxins: -2, 
                nutrients: 1, 
                description: 'å¾®æŒ¯åŠ¨åˆ†è§£æœ‰æœºç‰©ï¼Œå‡€åŒ–æ°´è´¨',
                layer: 'bottom',
                mobility: 'vibrate' // æŒ¯åŠ¨
            }
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            createOrganismSelector();
            updateDisplay();
            startEnvironmentalEffects();
            
            // äº‹ä»¶ç›‘å¬å™¨
            document.getElementById('lightSlider').addEventListener('input', updateEnvironment);
            document.getElementById('tempSlider').addEventListener('input', updateEnvironment);
            document.getElementById('ventSelect').addEventListener('change', updateEnvironment);
            
            // ç”Ÿæ€ç“¶é€‰æ‹©
            document.querySelectorAll('.bottle-option').forEach(option => {
                option.addEventListener('click', selectBottle);
            });
        }

        // ç¯å¢ƒæ•ˆæœ
        function startEnvironmentalEffects() {
            // æ°”æ³¡æ•ˆæœ - æ ¹æ®æº¶æ°§é‡è°ƒæ•´é¢‘ç‡
            setInterval(() => {
                if (gameState.environment.oxygen > 30 && !gameState.paused) {
                    const frequency = Math.max(1, 5 - (gameState.environment.oxygen / 20));
                    if (Math.random() < 1/frequency) {
                        createBubble();
                    }
                }
            }, 1500);

            // æ°´æ³¢çº¹æ•ˆæœ
            setInterval(() => {
                if (!gameState.paused && Math.random() < 0.3) {
                    createRipple();
                }
            }, 4000);

            // è¥å…»ç²’å­æ•ˆæœ
            setInterval(() => {
                if (!gameState.paused && gameState.environment.nutrients > 20) {
                    createParticle();
                }
            }, 3500);
        }

        function createBubble() {
            const container = document.getElementById('ecosystemView');
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            const size = Math.random() * 8 + 3;
            bubble.style.width = size + 'px';
            bubble.style.height = size + 'px';
            bubble.style.left = Math.random() * 90 + 5 + '%';
            bubble.style.bottom = '10px';
            
            container.appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.parentNode.removeChild(bubble);
                }
            }, 6000);
        }

        function createRipple() {
            const container = document.getElementById('ecosystemView');
            const ripple = document.createElement('div');
            ripple.className = 'water-ripple';
            
            ripple.style.width = '15px';
            ripple.style.height = '15px';
            ripple.style.left = Math.random() * 70 + 15 + '%';
            ripple.style.top = Math.random() * 50 + 25 + '%';
            
            container.appendChild(ripple);
            
            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 4000);
        }

        function createParticle() {
            const container = document.getElementById('ecosystemView');
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const size = Math.random() * 2 + 1;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            particle.style.background = `hsl(${Math.random() * 40 + 100}, 50%, 70%)`;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.bottom = '0px';
            
            container.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 10000);
        }

        function selectBottle(event) {
            document.querySelectorAll('.bottle-option').forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            gameState.bottleSize = event.currentTarget.dataset.size;
            document.getElementById('startBtn').disabled = false;
        }

        function startGame() {
            if (!gameState.bottleSize) return;
            
            document.querySelector('.setup-phase').classList.remove('active');
            document.querySelector('.game-phase').classList.add('active');
            
            // æ ¹æ®ç“¶å­å¤§å°è°ƒæ•´éš¾åº¦
            const sizeMultiplier = {
                small: 0.7,
                medium: 1.0,
                large: 1.5
            };
            
            gameState.sizeMultiplier = sizeMultiplier[gameState.bottleSize];
            startGameLoop();
            showInitialTip();
        }

        function createOrganismSelector() {
            const selector = document.getElementById('organismSelector');
            Object.keys(organismTypes).forEach(key => {
                const organism = organismTypes[key];
                const card = document.createElement('div');
                card.className = 'organism-card';
                card.dataset.type = key;
                card.innerHTML = `
                    <div class="icon">${organism.icon}</div>
                    <div class="name">${organism.name}</div>
                `;
                card.title = organism.description;
                card.addEventListener('click', () => selectOrganism(key));
                selector.appendChild(card);
            });
        }

        function selectOrganism(type) {
            document.querySelectorAll('.organism-card').forEach(card => card.classList.remove('selected'));
            document.querySelector(`[data-type="${type}"]`).classList.add('selected');
            gameState.selectedOrganism = type;
            document.getElementById('addOrganismBtn').disabled = false;
            
            // æ˜¾ç¤ºç”Ÿç‰©ä¿¡æ¯
            const organism = organismTypes[type];
            showTip(`å·²é€‰æ‹©ï¼š${organism.name} - ${organism.description}`, 'info');
        }

        function addSelectedOrganism() {
            if (!gameState.selectedOrganism) return;
            
            const type = organismTypes[gameState.selectedOrganism];
            let x, y;
            
            // æ ¹æ®ç”Ÿç‰©å±‚æ¬¡ç¡®å®šåˆå§‹ä½ç½®
            switch(type.layer) {
                case 'surface':  // æ°´é¢
                    x = Math.random() * 60 + 20;
                    y = Math.random() * 15 + 10;
                    break;
                case 'middle':   // ä¸­å±‚
                    x = Math.random() * 70 + 15;
                    y = Math.random() * 40 + 30;
                    break;
                case 'bottom':   // åº•å±‚
                    x = Math.random() * 80 + 10;
                    y = Math.random() * 20 + 70;
                    break;
                default:
                    x = Math.random() * 80 + 10;
                    y = Math.random() * 60 + 20;
            }
            
            const organism = {
                id: Date.now(),
                type: gameState.selectedOrganism,
                count: 1,
                x: x,
                y: y,
                baseX: x,  // è®°å½•åŸºå‡†ä½ç½®
                baseY: y,
                direction: Math.random() * 360,
                lastMove: Date.now()
            };
            
            gameState.organisms.push(organism);
            renderEcosystem();
            updatePopulationStats();
            checkAchievements();
            
            const orgType = organismTypes[gameState.selectedOrganism];
            showTip(`æˆåŠŸæ·»åŠ  ${orgType.name}ï¼è§‚å¯Ÿå®ƒçš„è‡ªç„¶è¡Œä¸ºæ¨¡å¼ã€‚`, 'success');
        }

        function updateEnvironment() {
            gameState.environment.light = parseInt(document.getElementById('lightSlider').value);
            gameState.environment.temperature = parseInt(document.getElementById('tempSlider').value);
            gameState.environment.ventilation = document.getElementById('ventSelect').value;
            
            document.getElementById('lightValue').textContent = gameState.environment.light;
            document.getElementById('tempValue').textContent = gameState.environment.temperature;
            document.getElementById('ventValue').textContent = {
                'sealed': 'å¯†å°',
                'semi': 'åŠå¼€æ”¾',
                'open': 'å¼€æ”¾'
            }[gameState.environment.ventilation];
            
            updateEcosystemActivity();
        }

        function updateEcosystemActivity() {
            const container = document.getElementById('ecosystemView');
            const env = gameState.environment;
            
            // æ ¹æ®ç¯å¢ƒæ¡ä»¶è°ƒæ•´æ´»åŠ¨çº§åˆ«
            const activityLevel = (env.oxygen / 100 + env.temperature / 30 + (100 - env.toxins) / 100) / 3;
            
            container.classList.remove('high-activity', 'low-activity');
            if (activityLevel > 0.75) {
                container.classList.add('high-activity');
            } else if (activityLevel < 0.4) {
                container.classList.add('low-activity');
            }
        }

        function renderEcosystem() {
            const container = document.getElementById('ecosystemView');
            // æ¸…é™¤ç°æœ‰ç”Ÿç‰©
            container.querySelectorAll('.organism').forEach(el => el.remove());
            
            gameState.organisms.forEach((organism, index) => {
                const type = organismTypes[organism.type];
                const element = document.createElement('div');
                element.className = `organism ${organism.type}`;
                element.style.left = organism.x + '%';
                element.style.top = organism.y + '%';
                element.innerHTML = `
                    <div style="position: relative; display: inline-block;">
                        ${type.icon}
                        <span style="position: absolute; top: -8px; right: -8px; font-size: 0.5em; background: rgba(0,0,0,0.7); color: white; border-radius: 6px; padding: 1px 3px; min-width: 12px; text-align: center;">${organism.count}</span>
                    </div>
                `;
                element.title = `${type.name}: ${organism.count}ä¸ª - ${type.description}`;
                
                container.appendChild(element);
                
                // å¯åŠ¨ç”Ÿç‰©ç‰¹å®šçš„ç§»åŠ¨è¡Œä¸º
                startOrganismBehavior(organism, element, type, index);
            });
            
            // æ›´æ–°æ€»æ•°
            const total = gameState.organisms.reduce((sum, org) => sum + org.count, 0);
            document.getElementById('populationCount').textContent = `æ€»æ•°: ${total}`;
            
            // æ›´æ–°ç”Ÿæ€çŠ¶æ€
            updateEcosystemStatus();
        }

        function startOrganismBehavior(organism, element, type, index) {
            const behaviorInterval = setInterval(() => {
                if (gameState.paused) return;
                
                // æ ¹æ®ç”Ÿç‰©ç±»å‹æ‰§è¡Œç‰¹å®šè¡Œä¸º
                switch(type.mobility) {
                    case 'fixed':
                        // å›ºå®šä½ç½®ç”Ÿç‰©ï¼ˆå¦‚ç»¿è—»ï¼‰ï¼Œåªåœ¨åŸä½å°èŒƒå›´æ‘†åŠ¨
                        break;
                    case 'drift':
                        // ç¼“æ…¢æ¼‚ç§»ï¼ˆå¦‚è“ç»¿è—»ï¼‰
                        organism.x += (Math.random() - 0.5) * 2;
                        organism.y += (Math.random() - 0.5) * 1.5;
                        break;
                    case 'float':
                        // æ°´é¢æ¼‚æµ®ï¼ˆå¦‚æµ®èï¼‰
                        organism.x += (Math.random() - 0.5) * 4;
                        // ä¿æŒåœ¨æ°´é¢
                        organism.y = Math.max(5, Math.min(25, organism.baseY + (Math.random() - 0.5) * 10));
                        break;
                    case 'sway':
                        // æ°´ä¸‹æ‘†åŠ¨ï¼ˆå¦‚æ°´è‰ï¼‰ï¼ŒåŸºæœ¬å›ºå®šä½†æœ‰æ‘†åŠ¨
                        organism.x = organism.baseX + (Math.random() - 0.5) * 8;
                        organism.y = organism.baseY + (Math.random() - 0.5) * 6;
                        break;
                    case 'hop':
                        // è·³è·ƒæ¸¸åŠ¨ï¼ˆå¦‚æ¨±èŠ±è™¾ï¼‰
                        if (Math.random() < 0.3) { // 30%æ¦‚ç‡ç§»åŠ¨
                            organism.x += (Math.random() - 0.5) * 12;
                            organism.y += (Math.random() - 0.5) * 8;
                        }
                        break;
                    case 'crawl':
                        // çˆ¬è¡Œï¼ˆå¦‚è‹¹æœèºï¼‰
                        organism.x += (Math.random() - 0.5) * 3;
                        organism.y += (Math.random() - 0.5) * 2;
                        // ä¿æŒåœ¨åº•éƒ¨
                        organism.y = Math.max(70, Math.min(90, organism.y));
                        break;
                    case 'swim':
                        // æ¸¸æ³³ï¼ˆå¦‚æ–‘é©¬é±¼ï¼‰
                        organism.x += (Math.random() - 0.5) * 10;
                        organism.y += (Math.random() - 0.5) * 8;
                        // éšæœºè§…é£Ÿè¡Œä¸º
                        if (Math.random() < 0.2) {
                            element.classList.add('feeding');
                            setTimeout(() => element.classList.remove('feeding'), 2000);
                        }
                        break;
                    case 'hunt':
                        // ç‹©çŒæ¸¸åŠ¨ï¼ˆå¦‚å°é¾™è™¾ï¼‰
                        const prey = findNearbyPrey(organism, index);
                        if (prey) {
                            // å‘çŒç‰©é è¿‘
                            const dx = prey.x - organism.x;
                            const dy = prey.y - organism.y;
                            organism.x += dx * 0.2;
                            organism.y += dy * 0.2;
                        } else {
                            // å·¡æ¸¸
                            organism.x += (Math.random() - 0.5) * 8;
                            organism.y += (Math.random() - 0.5) * 6;
                        }
                        break;
                    case 'vibrate':
                        // å¾®æŒ¯åŠ¨ï¼ˆå¦‚ç»†èŒï¼‰ï¼ŒåŸºæœ¬ä¸ç§»åŠ¨
                        organism.x += (Math.random() - 0.5) * 0.5;
                        organism.y += (Math.random() - 0.5) * 0.5;
                        break;
                }
                
                // è¾¹ç•Œæ£€æŸ¥
                organism.x = Math.max(5, Math.min(90, organism.x));
                organism.y = Math.max(10, Math.min(85, organism.y));
                
                // æ›´æ–°DOMä½ç½®
                if (element.parentNode) {
                    element.style.left = organism.x + '%';
                    element.style.top = organism.y + '%';
                }
                
            }, 3000 + Math.random() * 4000); // æ¯3-7ç§’æ‰§è¡Œä¸€æ¬¡è¡Œä¸º
            
            gameState.movementIntervals.push(behaviorInterval);
        }

        function findNearbyPrey(predator, predatorIndex) {
            const preyTypes = ['primary']; // æ é£Ÿè€…å¯»æ‰¾åˆçº§æ¶ˆè´¹è€…
            const nearbyPrey = gameState.organisms.filter((org, index) => {
                if (index === predatorIndex) return false;
                if (!preyTypes.includes(organismTypes[org.type].type)) return false;
                const distance = Math.sqrt(
                    Math.pow(org.x - predator.x, 2) + 
                    Math.pow(org.y - predator.y, 2)
                );
                return distance < 25; // 25% èŒƒå›´å†…
            });
            
            return nearbyPrey.length > 0 ? nearbyPrey[Math.floor(Math.random() * nearbyPrey.length)] : null;
        }

        function updateEcosystemStatus() {
            const env = gameState.environment;
            const status = document.getElementById('ecosystemStatus');
            const indicators = [];
            
            // æº¶æ°§çŠ¶æ€
            if (env.oxygen < 30) indicators.push('<div class="balance-indicator"><div class="balance-dot critical"></div>ç¼ºæ°§</div>');
            else if (env.oxygen > 85) indicators.push('<div class="balance-indicator"><div class="balance-dot warning"></div>é«˜æ°§</div>');
            else indicators.push('<div class="balance-indicator"><div class="balance-dot balanced"></div>æ­£å¸¸</div>');
            
            // pHçŠ¶æ€
            if (env.ph < 6.5 || env.ph > 8.5) indicators.push('<div class="balance-indicator"><div class="balance-dot critical"></div>pHå¼‚å¸¸</div>');
            
            // æ¯’ç´ çŠ¶æ€
            if (env.toxins > 30) indicators.push('<div class="balance-indicator"><div class="balance-dot critical"></div>æœ‰æ¯’</div>');
            
            status.innerHTML = indicators.join('');
        }

        function updateDisplay() {
            const env = gameState.environment;
            
            // ä¿®å¤æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜
            const dayDisplay = Math.round(gameState.day);
            
            // æ›´æ–°ç¯å¢ƒæŒ‡æ ‡
            document.getElementById('oxygenValue').textContent = Math.round(env.oxygen) + '%';
            document.getElementById('oxygenBar').style.width = env.oxygen + '%';
            
            document.getElementById('phValue').textContent = env.ph.toFixed(1);
            const phPercent = ((env.ph - 6) / 3) * 100; // 6-9 èŒƒå›´è½¬æ¢ä¸º 0-100%
            document.getElementById('phBar').style.width = Math.max(0, Math.min(100, phPercent)) + '%';
            
            document.getElementById('nutrientsValue').textContent = Math.round(env.nutrients) + '%';
            document.getElementById('nutrientsBar').style.width = env.nutrients + '%';
            
            document.getElementById('toxinsValue').textContent = Math.round(env.toxins) + '%';
            document.getElementById('toxinsBar').style.width = env.toxins + '%';
            
            // æ›´æ–°æ¸¸æˆæ—¶é—´
            document.getElementById('gameTime').textContent = `ç¬¬ ${dayDisplay} å¤©`;
            
            // æ£€æŸ¥ç”Ÿæ€çŠ¶æ€å¹¶ç»™å‡ºå»ºè®®
            checkEcosystemHealth();
        }

        function checkEcosystemHealth() {
            const env = gameState.environment;
            const producers = gameState.organisms.filter(org => organismTypes[org.type].type === 'producer').reduce((sum, org) => sum + org.count, 0);
            const consumers = gameState.organisms.filter(org => organismTypes[org.type].type === 'primary').reduce((sum, org) => sum + org.count, 0);
            
            // åŠ¨æ€æç¤ºç³»ç»Ÿ
            if (env.oxygen < 30 && producers < 3) {
                showTip('æº¶æ°§ä¸è¶³ï¼è§‚å¯Ÿç”Ÿç‰©æ´»åŠ¨æ˜¯å¦å˜æ…¢äº†ï¼Ÿå»ºè®®å¢åŠ ä¼šæ‘†åŠ¨çš„æ¤ç‰©ï¼ˆç»¿è—»ã€æ°´è‰ï¼‰ã€‚', 'danger');
            } else if (env.oxygen > 85) {
                showTip('æº¶æ°§è¿‡é«˜ï¼æ³¨æ„æ°”æ³¡é¢‘ç¹å‡ºç°ï¼Œæ¤ç‰©æ‘†åŠ¨è¿‡äºå‰§çƒˆï¼Œå»ºè®®å‡å°‘å…‰ç…§ã€‚', 'warning');
            } else if (env.nutrients > 80 && consumers < 2) {
                showTip('è¥å…»è¿‡å‰©ï¼æµ®èæ¼‚ç§»åŠ å¿«ï¼Œå»ºè®®å¢åŠ ä¼šè·³è·ƒçš„è‰é£ŸåŠ¨ç‰©ï¼ˆæ¨±èŠ±è™¾ï¼‰ã€‚', 'warning');
            } else if (env.toxins > 30) {
                showTip('æ¯’ç´ ç§¯ç´¯ï¼ç”Ÿç‰©æ´»åŠ¨æ˜æ˜¾å‡ç¼“ï¼Œå»ºè®®å¢åŠ ä¼šæŒ¯åŠ¨çš„åˆ†è§£ç»†èŒã€‚', 'danger');
            } else if (gameState.organisms.length === 0) {
                showTip('ç”Ÿæ€ç“¶æ˜¯ç©ºçš„ï¼å…ˆæ·»åŠ ä¸€äº›æ¤ç‰©ï¼Œè§‚å¯Ÿå®ƒä»¬çš„è‡ªç„¶æ‘†åŠ¨å’Œæ¼‚ç§»è¡Œä¸ºã€‚', 'info');
            }
        }

        function showTip(message, type = 'info') {
            const panel = document.getElementById('tipsPanel');
            const tipClass = type === 'danger' ? 'danger' : type === 'warning' ? 'warning' : type === 'success' ? 'success' : '';
            panel.innerHTML = `
                <div class="tips-panel ${tipClass}">
                    <h4>ğŸ’¡ ç”Ÿæ€æç¤º</h4>
                    <p>${message}</p>
                </div>
            `;
            
            // 5ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                if (panel.innerHTML.includes(message)) {
                    panel.innerHTML = '';
                }
            }, 5000);
        }

        function showInitialTip() {
            showTip('æ¬¢è¿æ¥åˆ°çœŸå®çš„ç”Ÿæ€ç“¶ä¸–ç•Œï¼æ¯ç§ç”Ÿç‰©éƒ½æœ‰ç‹¬ç‰¹çš„è¡Œä¸ºï¼šæ¤ç‰©è½»æŸ”æ‘†åŠ¨ï¼Œæµ®èæ°´é¢æ¼‚ç§»ï¼Œé±¼å„¿è‡ªç„¶æ¸¸æ³³ã€‚å…ˆæ·»åŠ ä¸€äº›æ¤ç‰©è§‚å¯Ÿå®ƒä»¬çš„è‡ªç„¶è¡Œä¸ºå§ï¼', 'info');
        }

        function updatePopulationStats() {
            const stats = document.getElementById('populationStats');
            if (gameState.organisms.length === 0) {
                stats.innerHTML = '<p style="color: #666; font-size: 14px;">è¿˜æ²¡æœ‰ç”Ÿç‰©ï¼Œå¿«å»æ·»åŠ ä¸€äº›å§ï¼</p>';
                return;
            }
            
            const typeGroups = {};
            gameState.organisms.forEach(org => {
                const type = organismTypes[org.type].type;
                if (!typeGroups[type]) typeGroups[type] = 0;
                typeGroups[type] += org.count;
            });
            
            const typeNames = {
                producer: 'ğŸŒ± ç”Ÿäº§è€…',
                primary: 'ğŸ¦ åˆçº§æ¶ˆè´¹è€…',
                secondary: 'ğŸŸ æ¬¡çº§æ¶ˆè´¹è€…',
                decomposer: 'ğŸ¦  åˆ†è§£è€…'
            };
            
            const html = Object.keys(typeGroups).map(type => {
                const count = typeGroups[type];
                const percentage = ((count / gameState.organisms.reduce((sum, org) => sum + org.count, 0)) * 100).toFixed(1);
                return `<div style="margin: 8px 0; display: flex; justify-content: space-between;">
                    <span>${typeNames[type]}</span>
                    <span>${count} (${percentage}%)</span>
                </div>`;
            }).join('');
            
            stats.innerHTML = html;
        }

        function simulateEcosystem() {
            if (gameState.paused) return;
            
            const env = gameState.environment;
            let oxygenChange = 0;
            let phChange = 0;
            let nutrientsChange = 0;
            let toxinsChange = 0;
            
            // ç¯å¢ƒå› ç´ å½±å“
            const lightFactor = env.light / 100;
            const tempFactor = Math.max(0, 1 - Math.abs(env.temperature - 23) / 10);
            const ventFactor = { sealed: 0.5, semi: 1.0, open: 1.5 }[env.ventilation];
            
            // æ¨¡æ‹Ÿæ¯ä¸ªç”Ÿç‰©çš„å½±å“
            gameState.organisms.forEach((organism, index) => {
                const type = organismTypes[organism.type];
                const multiplier = organism.count * gameState.sizeMultiplier * tempFactor;
                
                // ç”Ÿé•¿æˆ–æ­»äº¡
                let growthRate = type.growth * lightFactor * multiplier * 0.01;
                
                // ç¯å¢ƒå‹åŠ›
                if (env.oxygen < 20 || env.oxygen > 90 || env.toxins > 50) {
                    growthRate -= 0.1;
                    // æ·»åŠ æ­»äº¡åŠ¨ç”»
                    if (growthRate < -0.05) {
                        const elements = document.querySelectorAll(`.${organism.type}`);
                        elements.forEach(el => {
                            if (Math.random() < 0.1) {
                                el.classList.add('dying');
                            }
                        });
                    }
                }
                
                organism.count = Math.max(0, Math.round(organism.count + growthRate));
                
                // ç¯å¢ƒå½±å“
                if (type.oxygen) oxygenChange += type.oxygen * multiplier * 0.1;
                if (type.ph) phChange += type.ph * multiplier * 0.01;
                if (type.nutrients) nutrientsChange += type.nutrients * multiplier * 0.1;
                if (type.toxins) toxinsChange += type.toxins * multiplier * 0.1;
                
                // ç§»é™¤æ­»äº¡çš„ç§ç¾¤
                if (organism.count <= 0) {
                    gameState.organisms.splice(index, 1);
                }
            });
            
            // åº”ç”¨ç¯å¢ƒå˜åŒ–
            env.oxygen = Math.max(0, Math.min(100, env.oxygen + oxygenChange * ventFactor));
            env.ph = Math.max(6, Math.min(9, env.ph + phChange));
            env.nutrients = Math.max(0, Math.min(100, env.nutrients + nutrientsChange));
            env.toxins = Math.max(0, Math.min(100, env.toxins + toxinsChange));
            
            // è‡ªç„¶è¡°å‡
            env.toxins *= 0.98;
            
            // éšæœºäº‹ä»¶
            if (Math.random() < 0.002 * gameState.speed) {
                triggerRandomEvent();
            }
            
            updateDisplay();
            renderEcosystem();
            updatePopulationStats();
            checkAchievements();
            updateEcosystemActivity();
        }

        function triggerRandomEvent() {
            const events = [
                {
                    title: 'ğŸŒŠ è—»ç±»ç¹ç››ï¼',
                    description: 'è¥å…»å……è¶³ï¼Œæ¤ç‰©æ‘†åŠ¨æ›´åŠ æ´»è·ƒï¼Œè§‚å¯Ÿç»¿è—»çš„å¿«é€Ÿæ‘†åŠ¨ï¼',
                    effect: () => {
                        gameState.organisms.forEach(org => {
                            if (organismTypes[org.type].type === 'producer') {
                                org.count = Math.round(org.count * 1.5);
                            }
                        });
                        gameState.environment.oxygen += 20;
                    }
                },
                {
                    title: 'ğŸ¦  ç»†èŒæ´»è·ƒæœŸ',
                    description: 'åˆ†è§£è€…æ´»åŠ¨åŠ å¼ºï¼Œæ³¨æ„ç»†èŒçš„æŒ¯åŠ¨é¢‘ç‡å¢åŠ ï¼',
                    effect: () => {
                        gameState.organisms.forEach(org => {
                            if (organismTypes[org.type].type === 'decomposer') {
                                org.count = Math.round(org.count * 1.4);
                            }
                        });
                        gameState.environment.toxins -= 10;
                    }
                },
                {
                    title: 'ğŸŸ è§…é£Ÿé«˜å³°',
                    description: 'é±¼ç±»è¿›å…¥è§…é£ŸæœŸï¼Œæ¸¸åŠ¨æ›´åŠ é¢‘ç¹æ´»è·ƒï¼',
                    effect: () => {
                        gameState.organisms.forEach(org => {
                            if (organismTypes[org.type].type === 'secondary') {
                                org.count = Math.round(org.count * 1.2);
                            }
                        });
                    }
                }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            showEventPopup(event);
        }

        function showEventPopup(event) {
            const popup = document.createElement('div');
            popup.innerHTML = `
                <div class="overlay" onclick="this.parentElement.remove()"></div>
                <div class="event-popup">
                    <h2>${event.title}</h2>
                    <p>${event.description}</p>
                    <p style="margin-top: 15px; color: #666;">ä»”ç»†è§‚å¯Ÿç”Ÿç‰©è¡Œä¸ºçš„å˜åŒ–ï¼Œè¿™æ˜¯ç”Ÿæ€ç³»ç»Ÿçš„è‡ªç„¶èŠ‚å¾‹ï¼</p>
                    <button class="btn" onclick="this.parentElement.parentElement.remove(); (${event.effect})()">ç¡®å®š</button>
                </div>
            `;
            document.body.appendChild(popup);
        }

        function checkAchievements() {
            const newAchievements = [];
            
            // å®Œç¾å¹³è¡¡
            const env = gameState.environment;
            if (env.oxygen > 40 && env.oxygen < 80 && 
                env.ph > 6.5 && env.ph < 8.5 && 
                env.nutrients > 30 && env.nutrients < 70 && 
                env.toxins < 20 && gameState.day > 10) {
                if (!gameState.achievements.includes('perfect_balance')) {
                    newAchievements.push('perfect_balance');
                }
            }
            
            // ç”Ÿç‰©å¤šæ ·æ€§
            const uniqueTypes = new Set(gameState.organisms.map(org => organismTypes[org.type].type));
            if (uniqueTypes.size >= 3 && !gameState.achievements.includes('biodiversity')) {
                newAchievements.push('biodiversity');
            }
            
            // é•¿æœŸç”Ÿå­˜
            if (Math.round(gameState.day) >= 30 && !gameState.achievements.includes('survival')) {
                newAchievements.push('survival');
            }
            
            // è¡Œä¸ºè§‚å¯Ÿè€… - æ–°æˆå°±
            if (gameState.organisms.length >= 4 && !gameState.achievements.includes('observer')) {
                newAchievements.push('observer');
            }
            
            // æ·»åŠ æ–°æˆå°±
            newAchievements.forEach(achievement => {
                gameState.achievements.push(achievement);
                const achievementNames = {
                    perfect_balance: 'âš–ï¸ å®Œç¾å¹³è¡¡',
                    biodiversity: 'ğŸŒˆ ç”Ÿç‰©å¤šæ ·æ€§',
                    survival: 'ğŸ† é•¿æœŸç”Ÿå­˜',
                    observer: 'ğŸ‘ï¸ è¡Œä¸ºè§‚å¯Ÿè€…'
                };
                showTip(`ğŸ‰ è·å¾—æˆå°±ï¼š${achievementNames[achievement]}ï¼`, 'success');
            });
            
            updateAchievements();
        }

        function updateAchievements() {
            const achievementNames = {
                perfect_balance: 'âš–ï¸ å®Œç¾å¹³è¡¡',
                biodiversity: 'ğŸŒˆ ç”Ÿç‰©å¤šæ ·æ€§',
                survival: 'ğŸ† é•¿æœŸç”Ÿå­˜',
                observer: 'ğŸ‘ï¸ è¡Œä¸ºè§‚å¯Ÿè€…'
            };
            
            const container = document.getElementById('achievements');
            if (gameState.achievements.length === 0) {
                container.innerHTML = '<p style="color: #666; font-size: 14px;">æš‚æ— æˆå°±ï¼Œç»§ç»­åŠªåŠ›ï¼</p>';
            } else {
                container.innerHTML = gameState.achievements.map(ach => 
                    `<div class="achievement">${achievementNames[ach]}</div>`
                ).join('');
            }
        }

        function startGameLoop() {
            setInterval(() => {
                if (!gameState.paused) {
                    gameState.day += gameState.speed * 0.1;
                    simulateEcosystem();
                }
            }, 1000);
        }

        function pauseGame() {
            gameState.paused = !gameState.paused;
            document.getElementById('pauseBtn').innerHTML = gameState.paused ? 'â–¶ï¸ ç»§ç»­' : 'â¸ï¸ æš‚åœ';
            
            if (gameState.paused) {
                // æš‚åœæ—¶åœæ­¢æ‰€æœ‰åŠ¨ç”»
                const container = document.getElementById('ecosystemView');
                container.style.animationPlayState = 'paused';
                container.querySelectorAll('*').forEach(el => {
                    el.style.animationPlayState = 'paused';
                });
            } else {
                // ç»§ç»­æ—¶æ¢å¤åŠ¨ç”»
                const container = document.getElementById('ecosystemView');
                container.style.animationPlayState = 'running';
                container.querySelectorAll('*').forEach(el => {
                    el.style.animationPlayState = 'running';
                });
            }
        }

        function speedUp() {
            gameState.speed = gameState.speed === 1 ? 2 : gameState.speed === 2 ? 5 : 1;
            document.getElementById('speedBtn').innerHTML = `â© ${gameState.speed}xé€Ÿåº¦`;
        }

        function emergencyOpen() {
            gameState.environment.oxygen = Math.min(100, gameState.environment.oxygen + 30);
            gameState.environment.toxins = Math.max(0, gameState.environment.toxins - 20);
            updateDisplay();
            
            showTip('ğŸš¨ ç´§æ€¥å¤„ç†å®Œæˆï¼è§‚å¯Ÿç”Ÿç‰©æ´»åŠ¨æ˜¯å¦å˜å¾—æ›´æ´»è·ƒäº†ï¼Ÿ', 'info');
            
            // åˆ›å»ºé¢å¤–çš„æ°”æ³¡æ•ˆæœ
            for (let i = 0; i < 8; i++) {
                setTimeout(() => createBubble(), i * 150);
            }
        }

        function resetGame() {
            if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¼šä¸¢å¤±ã€‚')) {
                // æ¸…ç†ç§»åŠ¨é—´éš”
                gameState.movementIntervals.forEach(interval => clearInterval(interval));
                location.reload();
            }
        }

        function showHelp() {
            document.querySelector('.help-panel').classList.add('active');
        }

        function hideHelp() {
            document.querySelector('.help-panel').classList.remove('active');
        }

        function showIngameHelp() {
            document.querySelector('.ingame-help').classList.add('active');
        }

        function hideIngameHelp() {
            document.querySelector('.ingame-help').classList.remove('active');
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>
